<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Заявление о отсутствии ребенка</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @media print {
      @page {
        size: A4;
        margin: 1.5cm;
      }

      body {
        margin: 0 !important;
        padding: 0 !important;
        background: #fff !important;
      }

      .no-print {
        display: none !important;
      }

      .min-h-screen {
        min-height: auto !important;
        height: auto !important;
      }

      .p-4 { padding: 0 !important; }
      .md\:p-8 { padding: 0 !important; }

      .print-container {
        box-shadow: none !important;
        margin: 0 !important;
        padding: 0 !important;
        break-inside: avoid;
        page-break-inside: avoid;
      }

      html, body {
        height: auto !important;
        overflow: visible !important;
      }
    }
  </style>
</head>

<body class="min-h-screen bg-gray-50">
<div class="min-h-screen p-4 md:p-8">
<div class="max-w-4xl mx-auto">

<!-- ================= FORM ================= -->
<div class="no-print bg-white rounded-lg shadow-md p-4 md:p-6 mb-8">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Заявление о отсутствии ребенка</h1>

  <div class="space-y-4">

    <input id="kindergartenName" class="w-full px-4 py-2 border rounded-md"
      value="ГБДОУ детский сад №120" placeholder="Название детского сада">

    <input id="district" class="w-full px-4 py-2 border rounded-md"
      value="Выборгского района" placeholder="Район">

    <input id="headName" class="w-full px-4 py-2 border rounded-md"
      value="Соколовой М.В." placeholder="ФИО заведующего">

    <input id="parentFullName" class="w-full px-4 py-2 border rounded-md"
      placeholder="ФИО родителя полностью">

    <input id="childFullName" class="w-full px-4 py-2 border rounded-md"
      placeholder="ФИО ребенка">

    <input id="groupNumber" class="w-full px-4 py-2 border rounded-md"
      placeholder="Номер группы">

    <!-- ⭐ ПРИЧИНА -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Причина отсутствия
      </label>
      <input
        id="absenceReason"
        class="w-full px-4 py-2 border rounded-md"
        value="по семейным обстоятельствам."
        placeholder="по семейным обстоятельствам."
      >
    </div>

    <div class="flex gap-2">
      <input type="date" id="startDate" class="flex-1 border p-2">
      <input type="date" id="endDate" class="flex-1 border p-2">
    </div>

    <input type="date" id="applicationDate" class="w-full border p-2">

    <button onclick="window.print()"
      class="w-full bg-blue-600 text-white py-3 rounded-md">
      Печать / PDF
    </button>
  </div>
</div>

<!-- ================= PRINT ================= -->
<div class="bg-white p-8 print-container" style="font-family:'Times New Roman',serif;">

  <div class="text-right mb-8">
    <p>Заведующему</p>
    <p id="printKindergartenName"></p>
    <p id="printDistrict"></p>
    <p id="printHeadName" style="text-decoration:underline"></p>
    <p class="mt-2">от законного представителя</p>
    <p class="border-b" id="printParentFullName"></p>
    <p class="border-b" id="printChildFullName"></p>
  </div>

  <h2 class="text-center font-bold mb-6">ЗАЯВЛЕНИЕ</h2>

  <p>Прошу разрешить не приводить в детский сад моего ребенка</p>
  <p class="border-b inline-block min-w-[400px]" id="printChildFullName2"></p>

  <p>группа № <span id="printGroupNumber"></span></p>

  <p class="mt-4" id="printDates"></p>

  <!-- ⭐ ПРИЧИНА В ПЕЧАТИ -->
  <p class="mt-4" id="printReason"></p>

  <p class="mt-6">
    Ответственность за здоровье и безопасность ребёнка беру на себя.
  </p>

  <div class="mt-12 flex justify-between">
    <p id="printApplicationDate"></p>
    <div class="text-right">
      <p class="border-b w-48" id="printSignature">&nbsp;</p>
      <p class="text-sm">(подпись)</p>
    </div>
  </div>
</div>

</div>
</div>

<script>
function formatDate(d) {
  if (!d) return '';
  const date = new Date(d);
  const months = ['января','февраля','марта','апреля','мая','июня',
    'июля','августа','сентября','октября','ноября','декабря'];
  return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()} г.`;
}

function updateForm() {
  const reason = document.getElementById('absenceReason').value
    || 'по семейным обстоятельствам.';

  printKindergartenName.textContent = kindergartenName.value;
  printDistrict.textContent = district.value;
  printHeadName.textContent = headName.value;
  printParentFullName.textContent = parentFullName.value || '________________';
  printChildFullName.textContent = childFullName.value || '________________';
  printChildFullName2.textContent = childFullName.value || '________________';
  printGroupNumber.textContent = groupNumber.value || '___';
  printReason.textContent = reason;
  printDates.textContent =
    `с ${formatDate(startDate.value)} по ${formatDate(endDate.value)}`;
  printApplicationDate.textContent = formatDate(applicationDate.value);
  printSignature.textContent = parentFullName.value;
}

document.querySelectorAll('input').forEach(i =>
  i.addEventListener('input', updateForm)
);

updateForm();
</script>

</body>
</html>
