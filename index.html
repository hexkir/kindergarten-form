<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞—è–≤–ª–µ–Ω–∏–µ –æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–±–µ–Ω–∫–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            @page {
                margin: 1.5cm;
                size: A4;
            }
            .no-print {
                display: none !important;
            }
            .print-container {
                page-break-after: avoid;
                page-break-inside: avoid;
            }
            html, body {
                height: auto;
                overflow: visible;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <div class="min-h-screen p-4 md:p-8">
        <div class="max-w-4xl mx-auto">
            <!-- Input Form -->
            <div class="no-print bg-white rounded-lg shadow-md p-4 md:p-6 mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-6">–ó–∞—è–≤–ª–µ–Ω–∏–µ –æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–±–µ–Ω–∫–∞</h1>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ç—Å–∫–æ–≥–æ —Å–∞–¥–∞
                        </label>
                        <input
                            type="text"
                            id="kindergartenName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120"
                            value="–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120"
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –†–∞–π–æ–Ω
                        </label>
                        <input
                            type="text"
                            id="district"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞"
                            value="–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞"
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –§–ò–û –∑–∞–≤–µ–¥—É—é—â–µ–≥–æ
                        </label>
                        <input
                            type="text"
                            id="headName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í."
                            value="–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í."
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è (–ø–æ–ª–Ω–æ—Å—Ç—å—é)
                        </label>
                        <input
                            type="text"
                            id="parentFullName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á"
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –§–ò–û —Ä–µ–±–µ–Ω–∫–∞ (—Ñ–∞–º–∏–ª–∏—è, –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ)
                        </label>
                        <input
                            type="text"
                            id="childFullName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="–ò–≤–∞–Ω–æ–≤ –ü–µ—Ç—Ä –ò–≤–∞–Ω–æ–≤–∏—á"
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã
                        </label>
                        <input
                            type="text"
                            id="groupNumber"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="5"
                        />
                    </div>

                    <div class="flex gap-3">
                        <button
                            onclick="saveData()"
                            class="flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center font-medium"
                        >
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                            </svg>
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                        </button>
                        
                        <button
                            onclick="clearData()"
                            class="bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors flex items-center justify-center font-medium"
                        >
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>

                    <div id="savedMessage" class="text-center text-green-600 font-medium hidden"></div>

                    <hr class="my-6" />

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
                            </label>
                            <input
                                type="date"
                                id="startDate"
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                onchange="updateForm()"
                            />
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
                            </label>
                            <input
                                type="date"
                                id="endDate"
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                onchange="updateApplicationDate(); updateForm();"
                            />
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            –î–∞—Ç–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è
                        </label>
                        <input
                            type="date"
                            id="applicationDate"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            onchange="updateForm()"
                        />
                    </div>

                    <button
                        onclick="window.print()"
                        class="w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center font-medium"
                    >
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                        </svg>
                        –ü–µ—á–∞—Ç—å / –°–æ—Ö—Ä–∞–Ω–∏—Ç—å PDF
                    </button>
                    
                    <div class="mt-2 p-3 bg-blue-50 rounded-md text-sm text-gray-700">
                        <strong>üì± –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:</strong> –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ, –∑–∞—Ç–µ–º –≤ –¥–∏–∞–ª–æ–≥–µ –ø–µ—á–∞—Ç–∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ PDF" –∏–ª–∏ "Save as PDF"
                    </div>
                </div>
            </div>

            <!-- Printable Document -->
            <div class="bg-white p-8 md:p-12 shadow-lg print-container" style="font-family: 'Times New Roman', serif;">
                <div class="text-right mb-8">
                    <div class="inline-block text-left">
                        <p class="mb-1">–ó–∞–≤–µ–¥—É—é—â–µ–º—É</p>
                        <p class="mb-1" id="printKindergartenName">–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120</p>
                        <p class="mb-1" id="printDistrict">–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞</p>
                        <p class="mb-3" style="text-decoration: underline;" id="printHeadName">–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í.</p>
                        <p class="mb-1">–æ—Ç –ó–∞–∫–æ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è</p>
                        <p class="border-b border-black mb-1 min-w-[300px]" id="printParentFullName">_____________________________</p>
                        <p class="text-sm italic text-gray-600 mb-2">(—Ñ–∞–º–∏–ª–∏—è, –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ —Ä–æ–¥–∏—Ç–µ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é)</p>
                        <p class="border-b border-black mb-1 min-w-[300px]" id="printChildFullName">_____________________________</p>
                        <p class="text-sm italic text-gray-600">(—Ñ–∞–º–∏–ª–∏—è, –∏–º—è —Ä–µ–±—ë–Ω–∫–∞)</p>
                    </div>
                </div>

                <h2 class="text-center font-bold mb-6 text-lg">–ó–ê–Ø–í–õ–ï–ù–ò–ï</h2>

                <div class="space-y-4 text-justify leading-relaxed">
                    <p>–ü—Ä–æ—à—É —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –≤ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ –º–æ–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞</p>
                    
                    <p class="border-b border-black inline-block min-w-[400px]" id="printChildFullName2">___________________________________________</p>
                    <p class="text-sm italic text-gray-600 mb-4">(—Ñ–∞–º–∏–ª–∏—è, –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ —Ä–µ–±—ë–Ω–∫–∞)</p>

                    <p>–≥—Ä—É–ø–ø–∞ ‚Ññ<span class="border-b border-black inline-block min-w-[50px] text-center" id="printGroupNumber">_____</span></p>

                    <p class="mt-4" id="printDates">
                        —Å ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">___</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">___________</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">_</span> –≥. –ø–æ ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">___</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">___________</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">_</span> –≥.
                    </p>

                    <p class="mt-4">–ø–æ —Å–µ–º–µ–π–Ω—ã–º –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞–º.</p>

                    <p class="mt-6">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∑–¥–æ—Ä–æ–≤—å–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ–±—ë–Ω–∫–∞ –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –±–µ—Ä—É –Ω–∞ —Å–µ–±—è.</p>

                    <div class="mt-12 flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                        <div>
                            <p id="printApplicationDate">
                                ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">___</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">___________</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">_</span> –≥.
                            </p>
                        </div>
                        <div class="flex items-end gap-8">
                            <div class="text-center">
                                <p class="border-b border-black min-w-[150px] mb-1">&nbsp;</p>
                                <p class="text-sm">(–ø–æ–¥–ø–∏—Å—å)</p>
                            </div>
                            <div class="text-center">
                                <p class="border-b border-black min-w-[200px] mb-1" id="printSignature">&nbsp;</p>
                                <p class="text-sm">(—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize dates
        const today = new Date();
        const yesterday = new Date(today);
        yesterday.setDate(yesterday.getDate() - 1);
        
        document.getElementById('endDate').valueAsDate = yesterday;
        document.getElementById('applicationDate').valueAsDate = today;

        // Update application date based on end date
        function updateApplicationDate() {
            const endDateInput = document.getElementById('endDate');
            const applicationDateInput = document.getElementById('applicationDate');
            
            if (endDateInput.value) {
                const endDate = new Date(endDateInput.value);
                const nextDay = new Date(endDate);
                nextDay.setDate(nextDay.getDate() + 1);
                applicationDateInput.valueAsDate = nextDay;
            }
        }

        // Load saved data
        function loadData() {
            const saved = localStorage.getItem('kindergartenFormData');
            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('kindergartenName').value = data.kindergartenName || '–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120';
                document.getElementById('district').value = data.district || '–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞';
                document.getElementById('headName').value = data.headName || '–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í.';
                document.getElementById('parentFullName').value = data.parentFullName || '';
                document.getElementById('childFullName').value = data.childFullName || '';
                document.getElementById('groupNumber').value = data.groupNumber || '';
            }
            updateForm();
        }

        // Save data
        function saveData() {
            const data = {
                kindergartenName: document.getElementById('kindergartenName').value,
                district: document.getElementById('district').value,
                headName: document.getElementById('headName').value,
                parentFullName: document.getElementById('parentFullName').value,
                childFullName: document.getElementById('childFullName').value,
                groupNumber: document.getElementById('groupNumber').value
            };
            localStorage.setItem('kindergartenFormData', JSON.stringify(data));
            showMessage('‚úì –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        }

        // Clear data
        function clearData() {
            localStorage.removeItem('kindergartenFormData');
            document.getElementById('kindergartenName').value = '–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120';
            document.getElementById('district').value = '–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞';
            document.getElementById('headName').value = '–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í.';
            document.getElementById('parentFullName').value = '';
            document.getElementById('childFullName').value = '';
            document.getElementById('groupNumber').value = '';
            updateForm();
            showMessage('‚úì –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã');
        }

        // Show message
        function showMessage(text) {
            const el = document.getElementById('savedMessage');
            el.textContent = text;
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('hidden'), 3000);
        }

        // Format date
        function formatDate(dateString) {
            if (!dateString) return { day: '', month: '', year: '' };
            const date = new Date(dateString);
            const day = date.getDate();
            const monthNames = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', 
                                '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();
            return { day, month, year };
        }

        // Format signature
        function formatSignature(fullName) {
            if (!fullName) return '';
            
            const parts = fullName.trim().split(/\s+/);
            
            if (parts.length === 1) {
                return parts[0];
            }
            
            if (fullName.includes('.')) {
                return fullName;
            }
            
            if (parts.length >= 2) {
                const surname = parts[0];
                const firstInitial = parts[1] ? parts[1][0] + '.' : '';
                const middleInitial = parts[2] ? parts[2][0] + '.' : '';
                return `${surname} ${firstInitial}${middleInitial}`.trim();
            }
            
            return fullName;
        }

        // Update form
        function updateForm() {
            const kindergartenName = document.getElementById('kindergartenName').value;
            const district = document.getElementById('district').value;
            const headName = document.getElementById('headName').value;
            const parentFullName = document.getElementById('parentFullName').value;
            const childFullName = document.getElementById('childFullName').value;
            const groupNumber = document.getElementById('groupNumber').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const applicationDate = document.getElementById('applicationDate').value;

            document.getElementById('printKindergartenName').textContent = kindergartenName || '–ì–ë–î–û–£ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥ ‚Ññ120';
            document.getElementById('printDistrict').textContent = district || '–í—ã–±–æ—Ä–≥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞';
            document.getElementById('printHeadName').textContent = headName || '–°–æ–∫–æ–ª–æ–≤–æ–π –ú.–í.';
            document.getElementById('printParentFullName').textContent = parentFullName || '_____________________________';
            document.getElementById('printChildFullName').textContent = childFullName || '_____________________________';
            document.getElementById('printChildFullName2').textContent = childFullName || '___________________________________________';
            document.getElementById('printGroupNumber').textContent = groupNumber || '_____';
            document.getElementById('printSignature').textContent = formatSignature(parentFullName);

            const start = formatDate(startDate);
            const end = formatDate(endDate);
            const app = formatDate(applicationDate);

            document.getElementById('printDates').innerHTML = `
                —Å ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">${start.day || '___'}</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">${start.month || '___________'}</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">${start.year ? start.year.toString().slice(-1) : '_'}</span> –≥. –ø–æ ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">${end.day || '___'}</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">${end.month || '___________'}</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">${end.year ? end.year.toString().slice(-1) : '_'}</span> –≥.
            `;

            document.getElementById('printApplicationDate').innerHTML = `
                ¬´<span class="border-b border-black inline-block min-w-[40px] text-center">${app.day || '___'}</span>¬ª <span class="border-b border-black inline-block min-w-[120px] text-center">${app.month || '___________'}</span> 202<span class="border-b border-black inline-block min-w-[30px] text-center">${app.year ? app.year.toString().slice(-1) : '_'}</span> –≥.
            `;
        }

        // Add input listeners
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', updateForm);
        });

        // Load on start
        loadData();
    </script>
</body>
</html>
